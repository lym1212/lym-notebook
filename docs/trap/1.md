# 工作中遇到的

## el-dialog

### destroy-on-close

关闭时销毁 `Dialog` 中的元素，把这个属性改为`true`时并没有生效

在添加员工时，员工编号的输入框是根据员工编号规则是否启用来确定是否禁用的，如果在启用/禁用员工编号规则前打开了弹框，表单的验证规则不会正确绑定，因为元素没有销毁，`destroy-on-close`属性没有生效

**解决方法：给`dialog`添加`v-if`（但是这样打开弹框时会闪一下）**

## close事件

点击`dialog`右上角的叉，直接改变弹框绑定的`visible`字段为`false`不会触发`close`事件，当需要在关闭弹框时做一些操作时，例如：清楚验证，重置表单等，不能只写在`close`事件里；在打开弹框时做这些操作页面显示不友好，会让用户看到上一个表单内容（附件等）

```javascript
```



## el-select和TreeSelect

当点开一个`el-select`下拉框时，再在同一个页面点击`treeselect`下拉框时，没有触发`el-select`的失去焦点事件，`el-select`的下拉框不会关闭。

**解决方法：监听`treeselect`的`open`事件，手动关闭其他的`el-select`下拉框。`el-date-picker`同理，但是要调用`hidePicker`方法**

```
```



## 模板合并

工单多人流程节点时，之前的逻辑是，打开弹框时获取最新的模板内容，如果两个人在另一个人没提交时都打开了，提交时如果后端返回模板内容改变了那么前端会重新获取最新的内容，但是在赋值时没有考虑到当前填的内容和最新的内容合并，就把前一个人填的东西覆盖了。

**修改：如果作业证改变除了给旧内容字段赋值，还要把当前填的内容和最新的内容合并在提交**

```javascript
```

## ucharts

词云图没有`tooltip`功能，监听`@getIndex`方法动态绑定`style`显示

```javascript
```

## vue-router

不同的路由指向同一个页面时，在这两个路由切换时，不会触发页面的`created/mounted`，要监听路由变化把`created/mounted`里面的再执行一次（或者`updated`里执行？

```
```

